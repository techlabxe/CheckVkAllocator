# Vulkan のユーザーアロケータ調査用

本リポジトリは Vulkan でユーザー指定のアロケータを使ったときに発生する不具合を調査したコードを格納しています。

## 発生環境

- NVIDIA で発生、AMD では発生を確認できず
- 各種バージョン
    - ドライバ: 466.27 (DCH)
    - Vulkan 1.2.162
- Visual Studio 2019
- Windows10 20H2

## 発生条件

`vkResetDescriptorPool` で丸ごとディスクリプタセットのリセットを行うと、メモリがリークする。
カスタムアロケータ側の Free 関数がコールされていない。  
代わりに `vkFreeDescriptorSets` で個別のディスクリプタセットを解放するようにするとメモリリークは発生しない。

Vulkanの検証レイヤーの有無にかかわらず発生している。
